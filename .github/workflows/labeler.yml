# 🏷️ Automatic PR Labeling for Otogram
# Automatically assign labels to pull requests based on changed files

name: "🏷️ Auto Label"

on:
  pull_request:
    types: [opened, edited, synchronize]

permissions:
  contents: read
  pull-requests: write

jobs:
  label:
    name: "🏷️ Apply Labels"
    runs-on: ubuntu-latest
    timeout-minutes: 5
    
    steps:
    - name: "📥 Checkout Code"
      uses: actions/checkout@v4

    - name: "🏷️ Run Labeler"
      uses: actions/labeler@v5
      with:
        repo-token: "${{ secrets.GITHUB_TOKEN }}"
        configuration-path: .github/labeler.yml
        sync-labels: true

    - name: "📏 Add Size Labels"
      uses: codelytv/pr-size-labeler@v1
      with:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        xs_label: 'size: xs'
        xs_max_size: 10
        s_label: 'size: s'
        s_max_size: 30
        m_label: 'size: m'
        m_max_size: 100
        l_label: 'size: l'
        l_max_size: 500
        xl_label: 'size: xl'
        message_if_xl: |
          🚨 This PR is very large (500+ lines changed). 
          Consider breaking it into smaller, focused PRs for easier review.

    - name: "🔍 Comment on First-Time Contributor PR"
      uses: actions/first-interaction@v1
      with:
        repo-token: ${{ secrets.GITHUB_TOKEN }}
        pr-message: |
          👋 Thanks for your first contribution to Otogram!
          
          **Welcome to the community!** 🎉
          
          A few things to help your PR get reviewed quickly:
          
          ✅ **Checklist:**
          - [ ] Run `python scripts/health_check.py` to ensure system health
          - [ ] Make sure all tests pass (`pytest tests/`)
          - [ ] Follow our coding standards (`black` formatting, `mypy` types)
          - [ ] Update documentation if needed
          
          📚 **Resources:**
          - [Contributing Guide](https://github.com/dygje/Otogram/blob/main/docs/CONTRIBUTING.md)
          - [Setup Guide](https://github.com/dygje/Otogram/blob/main/docs/SETUP_GUIDE.md)
          
          We appreciate your contribution and will review this as soon as possible! 🚀